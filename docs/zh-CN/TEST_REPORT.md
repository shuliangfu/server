# @dreamer/server æµ‹è¯•æŠ¥å‘Š

## ğŸ“Š æµ‹è¯•æ¦‚è§ˆ

- **æµ‹è¯•åº“ç‰ˆæœ¬**ï¼š@dreamer/test@^1.0.0-beta.40
- **æµ‹è¯•æ¡†æ¶**ï¼š@dreamer/testï¼ˆå…¼å®¹ Deno ä¸ Bunï¼‰
- **æµ‹è¯•æ—¥æœŸ**ï¼š2026-02-11
- **æµ‹è¯•ç¯å¢ƒ**ï¼š
  - Deno 2.6+
  - Bun 1.3.5

## ğŸ“ˆ æµ‹è¯•ç»“æœ

### æ€»ä½“ç»Ÿè®¡

- **æ€»ç”¨ä¾‹æ•°**ï¼š143
- **é€šè¿‡**ï¼š143 âœ…
- **å¤±è´¥**ï¼š0
- **é€šè¿‡ç‡**ï¼š100% âœ…
- **æµ‹è¯•æ–‡ä»¶æ•°**ï¼š10

### æµ‹è¯•æ–‡ä»¶ç»Ÿè®¡

| æ¨¡å—         | æµ‹è¯•æ–‡ä»¶                          | ç”¨ä¾‹æ•° | çŠ¶æ€        |
| ------------ | --------------------------------- | ------ | ----------- |
| **æ ¸å¿ƒ**     |                                   |        |             |
|              | `context.test.ts`                 | 7      | âœ… å…¨éƒ¨é€šè¿‡ |
|              | `cookie.test.ts`                  | 20     | âœ… å…¨éƒ¨é€šè¿‡ |
|              | `http.test.ts`                    | 18     | âœ… å…¨éƒ¨é€šè¿‡ |
|              | `mod.test.ts`                     | 16     | âœ… å…¨éƒ¨é€šè¿‡ |
|              | `router-adapter.test.ts`          | 5      | âœ… å…¨éƒ¨é€šè¿‡ |
|              | `port-utils.test.ts`              | 9      | âœ… å…¨éƒ¨é€šè¿‡ |
| **å¼€å‘å·¥å…·** |                                   |        |             |
|              | `dev/hmr-client.test.ts`          | 9      | âœ… å…¨éƒ¨é€šè¿‡ |
|              | `dev/module-graph.test.ts`        | 14     | âœ… å…¨éƒ¨é€šè¿‡ |
|              | `dev/performance-monitor.test.ts` | 14     | âœ… å…¨éƒ¨é€šè¿‡ |
|              | `dev/route-inference.test.ts`     | 31     | âœ… å…¨éƒ¨é€šè¿‡ |

### è¯´æ˜

- **ä¸­é—´ä»¶æµ‹è¯•**ï¼šå·²è¿ç§»è‡³
  [@dreamer/middlewares](https://jsr.io/@dreamer/middlewares)ï¼Œæœ¬åº“ä»…å†å¯¼å‡ºä¸­é—´ä»¶
  API ä»¥ä¿æŒå…¼å®¹ã€‚

## ğŸ” åŠŸèƒ½æµ‹è¯•æ‘˜è¦

### 1. æ ¸å¿ƒæ¨¡å—

#### 1.1 HTTP ä¸Šä¸‹æ–‡ (context.test.ts) - 7 ä¸ªç”¨ä¾‹

- âœ… HTTP ä¸Šä¸‹æ–‡åˆ›å»ºä¸å±æ€§è®¿é—®
- âœ… Cookie ç®¡ç†å™¨é›†æˆã€çŠ¶æ€ç®¡ç†ã€æŸ¥è¯¢å‚æ•°è§£æ
- âœ… pathã€methodã€URL è®¿é—®

#### 1.2 Cookie ç®¡ç† (cookie.test.ts) - 20 ä¸ªç”¨ä¾‹

- âœ… parseCookie / serializeCookie / CookieManager å®Œæ•´æµç¨‹

#### 1.3 HTTP åº”ç”¨ (http.test.ts) - 18 ä¸ªç”¨ä¾‹

- âœ… Http æ„é€ ã€ä¸­é—´ä»¶æ³¨å†Œã€è·¯ç”±é›†æˆã€é”™è¯¯å¤„ç†ã€è¯·æ±‚/å“åº”å¤„ç†ã€ä¼˜é›…å…³é—­

#### 1.4 ä¸»æ¨¡å— (mod.test.ts) - 16 ä¸ªç”¨ä¾‹

- âœ… Server ç±»ã€ç±»å‹å¯¼å‡ºã€ä¸­é—´ä»¶/è·¯ç”±/é”™è¯¯å¤„ç†æ³¨å†Œ

#### 1.5 è·¯ç”±é€‚é…å™¨ (router-adapter.test.ts) - 5 ä¸ªç”¨ä¾‹

- âœ… RouterAdapter å®ä¾‹ã€è·¯ç”±åŒ¹é…ã€åŠ¨æ€å‚æ•°

#### 1.6 ç«¯å£æ£€æµ‹ä¸å ç”¨ (port-utils.test.ts) - 9 ä¸ªç”¨ä¾‹

- âœ… isPortInUseï¼šç«¯å£ç©ºé—²è¿”å› falseï¼Œè¢«å ç”¨è¿”å› true
- âœ… findAvailablePortï¼šèµ·å§‹ç«¯å£ç©ºé—²æ—¶è¿”å›è¯¥ç«¯å£ï¼›è¢«å ç”¨æ—¶è¿”å›
  startPort+1ï¼›è¿ç»­å¤šç«¯å£å ç”¨æ—¶è¿”å›ç¬¬ä¸€ä¸ªå¯ç”¨ï¼›maxAttempts å†…æ— å¯ç”¨æ—¶æŠ›å‡º
- âœ… Server å¯åŠ¨ï¼šé…ç½®ç«¯å£è¢«å ç”¨æ—¶ä½¿ç”¨ port+1 ä¸” server.port
  ä¸ºå®é™…ç«¯å£ï¼›ç«¯å£ç©ºé—²æ—¶åœ¨é…ç½®ç«¯å£ç›‘å¬

### 2. å¼€å‘å·¥å…·

#### 2.1 HMR å®¢æˆ·ç«¯ (dev/hmr-client.test.ts) - 9 ä¸ªç”¨ä¾‹

- âœ… injectHMRClientã€generateHMRClientScript

#### 2.2 è·¯ç”±æ¨æ–­ (dev/route-inference.test.ts) - 31 ä¸ªç”¨ä¾‹

- âœ… è·¯ç”±æ¨æ–­ã€Layout/page/component æ–‡ä»¶æ£€æµ‹ã€è‡ªå®šä¹‰æ¨¡å¼

#### 2.3 æ¨¡å—ä¾èµ–å›¾ (dev/module-graph.test.ts) - 14 ä¸ªç”¨ä¾‹

- âœ… æ¨¡å—ç®¡ç†ã€ä¾èµ–è¿½è¸ªã€åˆ é™¤ä¸æŸ¥è¯¢

#### 2.4 æ€§èƒ½ç›‘æ§ (dev/performance-monitor.test.ts) - 14 ä¸ªç”¨ä¾‹

- âœ… æ›´æ–°è®°å½•ã€ç»Ÿè®¡ã€æ€§èƒ½æŒ‡æ ‡ã€æ•°æ®æ¸…ç†

## ğŸ“Š æµ‹è¯•è´¨é‡

- âœ… **åŠŸèƒ½è¦†ç›–**ï¼šæ ¸å¿ƒä¸å¼€å‘å·¥å…·å‡æœ‰æµ‹è¯•
- âœ… **è¾¹ç•Œä¸é”™è¯¯**ï¼šè¾¹ç•Œæƒ…å†µä¸é”™è¯¯å¤„ç†å·²è¦†ç›–
- âœ… **èµ„æºæ¸…ç†**ï¼šæµ‹è¯•æ­£ç¡®æ¸…ç†èµ„æº
- âœ… **è·¨è¿è¡Œæ—¶**ï¼šDeno ä¸ Bun å‡é€šè¿‡

## ğŸ”§ å·²çŸ¥é—®é¢˜

æ— ã€‚å…¨éƒ¨æµ‹è¯•é€šè¿‡ã€‚

## ğŸ“ ç»“è®º

âœ… **å…± 143 ä¸ªç”¨ä¾‹é€šè¿‡ï¼Œé€šè¿‡ç‡ 100%**

âœ… **ç«¯å£å ç”¨**ï¼šç«¯å£æ£€æµ‹ï¼ˆisPortInUseã€findAvailablePortï¼‰åŠ Server
åœ¨ç«¯å£å†²çªæ—¶è‡ªåŠ¨ port+1 ç”± port-utils.test.ts è¦†ç›–

âœ… **ä¸­é—´ä»¶**ï¼šå®ç°ä¸æµ‹è¯•å·²è¿ç§»è‡³ @dreamer/middlewaresï¼Œæœ¬åº“ä»…å†å¯¼å‡ºä»¥ä¿æŒå…¼å®¹

**@dreamer/server å¯ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚**

---

_æœ€åæ›´æ–°ï¼š2026-02-11_
